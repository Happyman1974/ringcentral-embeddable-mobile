{"version":3,"sources":["webpack://ringcentral-embeddable-mobile/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://ringcentral-embeddable-mobile/webpack/bootstrap","webpack://ringcentral-embeddable-mobile/webpack/runtime/compat get default export","webpack://ringcentral-embeddable-mobile/webpack/runtime/define property getters","webpack://ringcentral-embeddable-mobile/webpack/runtime/hasOwnProperty shorthand","webpack://ringcentral-embeddable-mobile/./src/client/app/common.js","webpack://ringcentral-embeddable-mobile/./src/client/app/check-permission.js","webpack://ringcentral-embeddable-mobile/./src/client/app/event-handler.js","webpack://ringcentral-embeddable-mobile/./src/client/work.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","module","exports","wait","ms","Promise","resolve","setTimeout","waitUntilLoad","inited","window","cordova","plugins","iosrtc","console","log","loadScript","url","id","dom","document","getElementById","script","createElement","type","src","async","body","appendChild","checkPermission","registerGlobals","navigator","mediaDevices","enumerateDevices","enumerateDevicesOriginal","keys","then","arr","map","d","reduce","p","k","audioinput","checkMicrophonePermission","hasPermission","getMicrophonePermission","message","warn","postMessage","data","getCode","c","localStorage","getItem","setItem","login","msg","callbackUri","rc","getUrl","authUrlDefaultRc","replace","defaultState","view","onEvent","e","debug","oAuthUri","location","href","handleEvent","JSON","parse","stringify","addEventListener","run"],"mappings":"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","file":"js/work.bundle.js","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","\nexport function wait (ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms)\n  })\n}\n\nexport async function waitUntilLoad () {\n  let inited = false\n  while (!inited) {\n    if (window.cordova && window.cordova.plugins && window.cordova.plugins.iosrtc) {\n      inited = true\n    } else {\n      console.log('wait')\n      await wait(50)\n    }\n  }\n  return true\n}\n\nexport function loadScript (url, id) {\n  const dom = document.getElementById(id)\n  if (dom) {\n    return\n  }\n  const script = document.createElement('script')\n  script.type = 'text/javascript'\n  script.src = 'app.js'\n  script.id = id\n  script.async = false\n  document.body.appendChild(script)\n}\n","\nexport function checkPermission () {\n  // First check whether we already have permission to access the microphone.\n  cordova.plugins.iosrtc.registerGlobals()\n  if (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n    navigator.mediaDevices.enumerateDevicesOriginal = navigator.mediaDevices.enumerateDevices\n    navigator.mediaDevices.enumerateDevices = () => {\n      const keys = [\n        'deviceId',\n        'facing',\n        'groupId',\n        'id',\n        'kind',\n        'label'\n      ]\n      return navigator\n        .mediaDevices\n        .enumerateDevicesOriginal()\n        .then(arr => {\n          return arr.map(d => {\n            return keys.reduce((p, k) => {\n              return {\n                ...p,\n                [k]: d[k] || ''\n              }\n            }, {})\n          })\n        })\n    }\n  }\n\n  window.audioinput.checkMicrophonePermission((hasPermission) => {\n    if (hasPermission) {\n      console.log('We already have permission to record.')\n      // startCapture()\n    } else {\n      // Ask the user for permission to access the microphone\n      window.audioinput.getMicrophonePermission((hasPermission, message) => {\n        if (hasPermission) {\n          console.log('User granted us permission to record.')\n        } else {\n          console.warn('User denied permission to record.')\n        }\n      })\n    }\n  })\n}\n","/**\n * handle events\n */\n\nfunction postMessage (data) {\n  window.postMessage(data, '*')\n}\n\nexport function getCode () {\n  const key = 'rc-authcode'\n  const c = window.localStorage.getItem(key)\n  if (c) {\n    window.localStorage.setItem(key, '')\n    return c\n  } else {\n    return ''\n  }\n}\n\nexport function login (msg = postMessage) {\n  const c = getCode()\n  if (c) {\n    msg({\n      type: 'rc-adapter-authorization-code',\n      callbackUri: `${window.rc.callbackUri}?code=${c}`\n    })\n  }\n}\n\nexport function getUrl () {\n  return window.rc.authUrlDefaultRc.replace(\n    window.rc.defaultState,\n    window.rc.view\n  )\n}\n\nfunction onEvent (e) {\n  const { data } = e\n  console.debug('got data from ev', data)\n  if (data) {\n    switch (data.type) {\n      case 'rc-login-popup-notify':\n        // get login oAuthUri from widget\n        console.log('rc-login-popup-notify:', data.oAuthUri)\n        window.location.href = getUrl()\n        //  window.open(data.oAuthUri); // open oauth uri to login\n        break\n      case 'rc-adapter-pushAdapterState':\n        setTimeout(login, 100)\n        break\n      default:\n        break\n    }\n  }\n}\n\nexport function handleEvent () {\n  window.rc = JSON.parse(\n    window.localStorage.getItem('rc-data-ref', JSON.stringify(window.rc))\n  )\n  // window.top = window\n  // window.parent = window\n  window.addEventListener('message', onEvent)\n}\n","\n/**\n * replace app default script\n */\n\nimport { waitUntilLoad, loadScript } from './app/common'\nimport { checkPermission } from './app/check-permission'\nimport { handleEvent } from './app/event-handler'\n\nasync function run () {\n  await waitUntilLoad()\n  checkPermission()\n  await loadScript('app.js', 'rc-app')\n  handleEvent()\n}\n\nrun()\n"],"sourceRoot":""}